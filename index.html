function evocaManuale() {
    if(!dataStream.trim()) { alert("Il sistema non ha abbastanza dati per l'evocazione!"); return; }
    
    const b = document.getElementById('chat');
    const testoBasso = dataStream.toLowerCase();
    
    // Logica Tema Fantasy/Digital
    let tag = "fantasy,painting";
    if(testoBasso.includes("fuoco") || testoBasso.includes("drago")) tag = "dragon,fire,conceptart";
    if(testoBasso.includes("tecnologia") || testoBasso.includes("robot")) tag = "cyberpunk,cyborg,illustration";
    if(testoBasso.includes("natura") || testoBasso.includes("bosco")) tag = "forest,mystical,creature";
    if(testoBasso.includes("spazio") || testoBasso.includes("alieno")) tag = "alien,planet,scifi";
    
    const sporco = ["cazzo", "merda", "vaffanculo", "schifo"].some(p => testoBasso.includes(p));
    if(sporco) tag = "glitch,dark,horror,abstract";

    // GENERATORE DI UNICITÀ (Lock variabile)
    // Usiamo il timestamp attuale per forzare un'immagine sempre nuova
    const uniqueID = Date.now(); 
    
    let larghezza = Math.min(450, Math.max(220, dataStream.length * 1.5));
    let potenza = Math.floor(Math.random() * (dataStream.length * 10)) + 500;

    // Nuovo URL che forza la variazione
    const imgUrl = `https://loremflickr.com/600/800/${tag}/all?lock=${uniqueID}`;

    b.innerHTML += `
        <div class="card-container">
            <div class="magic-card" style="width: ${larghezza}px; border-color: ${sporco ? '#ff0055' : 'gold'};">
                <div style="font-size: 0.7em; color: gold; margin-bottom: 5px; text-transform: uppercase;">
                    ${sporco ? '⚠️ Entity Corrupted ⚠️' : '✨ Digital Summon ✨'}
                </div>
                <div class="card-art">
                    <img src="${imgUrl}" style="filter: contrast(1.1) brightness(1.1); min-height: 200px;">
                </div>
                <div class="card-info">
                    <div style="font-weight: bold; color: gold; margin-bottom: 3px;">${tag.split(',')[0]} Type</div>
                    <i>"${dataStream.substring(0, 100)}..."</i>
                </div>
                <div class="stats-hex">${potenza} DP</div>
            </div>
        </div>`;
    
    dataStream = ""; 
    b.scrollTop = b.scrollHeight;
}

